(()=>{var e={};e.id=285,e.ids=[285],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57147:e=>{"use strict";e.exports=require("fs")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},27264:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>d,originalPathname:()=>l,pages:()=>p,routeModule:()=>f,tree:()=>u});var n=r(50482),o=r(69108),a=r(62563),i=r.n(a),s=r(68300),c={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>s[e]);r.d(t,c);let u=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4123)),"/Users/pierce/projects/lkdw/frontend/src/app/checkout/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,89354))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,21342)),"/Users/pierce/projects/lkdw/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,89354))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/pierce/projects/lkdw/frontend/src/app/checkout/page.tsx"],l="/checkout/page",d={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},63403:(e,t,r)=>{Promise.resolve().then(r.bind(r,7755))},21541:(e,t,r)=>{"use strict";var n=r(40378);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,a,i){if(i!==n){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},7470:(e,t,r)=>{"use strict";e.exports=r(21541)()},40378:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7755:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>en});var n,o=r(95344),a=r(25011),i=r(96359),s=r(59845),c=r(6952),u=r.n(c),p=r(13345),l=r(4992);function d({cart:e}){let{formatted:t}=(0,p.w)(e);return(0,o.jsxs)("div",{className:u().cartListWrapper,children:[e.map(e=>(0,o.jsxs)("div",{className:u().cartItemWrapper,children:[(0,o.jsxs)("h4",{children:[e.product.title," x ",e.quantity]}),o.jsx("h4",{children:(0,l.Z)(e.product.price)})]},e.id)),(0,o.jsxs)("div",{className:u().totalsWrapper,children:[o.jsx("h4",{children:"Total:"}),o.jsx("h4",{children:t})]})]})}var f=r(3729),m=r.n(f),h=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.0.5",startTime:t})},y=null,g=function(e,t,r){if(null===e)return null;var n=e.apply(void 0,t);return h(n,r),n},v=!1,x=function(){return n||(n=(null!==y?y:(y=new Promise(function(e,t){e(null)})).catch(function(e){return y=null,Promise.reject(e)})).catch(function(e){return n=null,Promise.reject(e)}))};Promise.resolve().then(function(){return x()}).catch(function(e){v||console.warn(e)});var b=r(7470),j=r.n(b);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=o){var a=[],i=!0,s=!1;try{for(o=o.call(e);!(i=(r=o.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=m().useRef(e);return m().useEffect(function(){t.current=e},[e]),t.current},O=function(e){return null!==e&&"object"===_(e)},N="[object Object]",q=function e(t,r){if(!O(t)||!O(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var o=Object.prototype.toString.call(t)===N;if(o!==(Object.prototype.toString.call(r)===N))return!1;if(!o&&!n)return t===r;var a=Object.keys(t),i=Object.keys(r);if(a.length!==i.length)return!1;for(var s={},c=0;c<a.length;c+=1)s[a[c]]=!0;for(var u=0;u<i.length;u+=1)s[i[u]]=!0;var p=Object.keys(s);return p.length===a.length&&p.every(function(n){return e(t[n],r[n])})},A=function(e,t,r){return O(e)?Object.keys(e).reduce(function(n,o){var a=!O(t)||!q(e[o],t[o]);return r.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),n):a?k(k({},n||{}),{},S({},o,e[o])):n},null):null},T="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;if(null===e||O(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(t)},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;if(O(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return I(e,t)})};var r=I(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},R=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"2.5.0"}),e.registerAppInfo({name:"react-stripe-js",version:"2.5.0",url:"https://stripe.com/docs/stripe-js/react"}))},L=m().createContext(null);L.displayName="CustomCheckoutSdkContext";var M=function(e,t){if(!e)throw Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CustomCheckoutProvider> provider."));return e};m().createContext(null).displayName="CustomCheckoutContext",j().any,j().shape({clientSecret:j().string.isRequired,elementsOptions:j().object}).isRequired;var B=function(e){var t=m().useContext(L),r=m().useContext(U);if(t&&r)throw Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return t?M(t,e):Y(r,e)},U=m().createContext(null);U.displayName="ElementsContext";var Y=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},D=m().createContext(null);D.displayName="CartElementContext";var G=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},Z=function(e){var t=e.stripe,r=e.options,n=e.children,o=m().useMemo(function(){return W(t)},[t]),a=P(m().useState(null),2),i=a[0],s=a[1],c=P(m().useState(null),2),u=c[0],p=c[1],l=P(m().useState(function(){return{stripe:"sync"===o.tag?o.stripe:null,elements:"sync"===o.tag?o.stripe.elements(r):null}}),2),d=l[0],f=l[1];m().useEffect(function(){var e=!0,t=function(e){f(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==o.tag||d.stripe?"sync"!==o.tag||d.stripe||t(o.stripe):o.stripePromise.then(function(r){r&&e&&t(r)}),function(){e=!1}},[o,d,r]);var h=E(t);m().useEffect(function(){null!==h&&h!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[h,t]);var y=E(r);return m().useEffect(function(){if(d.elements){var e=A(r,y,["clientSecret","fonts"]);e&&d.elements.update(e)}},[r,y,d.elements]),m().useEffect(function(){R(d.stripe)},[d.stripe]),m().createElement(U.Provider,{value:d},m().createElement(D.Provider,{value:{cart:i,setCart:s,cartState:u,setCartState:p}},n))};Z.propTypes={stripe:j().any,options:j().object};var F={cart:null,cartState:null,setCart:function(){},setCartState:function(){}},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=m().useContext(D);return t?F:G(r,e)};j().func.isRequired;var X=function(e,t,r){var n=!!r,o=m().useRef(r);m().useEffect(function(){o.current=r},[r]),m().useEffect(function(){if(!n||!e)return function(){};var r=function(){o.current&&o.current.apply(o,arguments)};return e.on(t,r),function(){e.off(t,r)}},[n,t,e,o])},$=function(e,t){var r="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),n=t?function(e){var t=B("mounts <".concat(r,">"));J("mounts <".concat(r,">"),"customCheckoutSdk"in t);var n=e.id,o=e.className;return m().createElement("div",{id:n,className:o})}:function(t){var n,o=t.id,a=t.className,i=t.options,s=void 0===i?{}:i,c=t.onBlur,u=t.onFocus,p=t.onReady,l=t.onChange,d=t.onEscape,f=t.onClick,h=t.onLoadError,y=t.onLoaderStart,g=t.onNetworksChange,v=t.onCheckout,x=t.onLineItemClick,b=t.onConfirm,j=t.onCancel,C=t.onShippingAddressChange,k=t.onShippingRateChange,_=B("mounts <".concat(r,">")),S="elements"in _?_.elements:null,w="customCheckoutSdk"in _?_.customCheckoutSdk:null,O=P(m().useState(null),2),N=O[0],q=O[1],T=m().useRef(null),I=m().useRef(null),W=J("mounts <".concat(r,">"),"customCheckoutSdk"in _),R=W.setCart,L=W.setCartState;X(N,"blur",c),X(N,"focus",u),X(N,"escape",d),X(N,"click",f),X(N,"loaderror",h),X(N,"loaderstart",y),X(N,"networkschange",g),X(N,"lineitemclick",x),X(N,"confirm",b),X(N,"cancel",j),X(N,"shippingaddresschange",C),X(N,"shippingratechange",k),"cart"===e?n=function(e){L(e),p&&p(e)}:p&&(n="expressCheckout"===e?p:function(){p(N)}),X(N,"ready",n),X(N,"change","cart"===e?function(e){L(e),l&&l(e)}:l),X(N,"checkout","cart"===e?function(e){L(e),v&&v(e)}:v),m().useLayoutEffect(function(){if(null===T.current&&null!==I.current&&(S||w)){var t=null;w?t=w.createElement(e,s):S&&(t=S.create(e,s)),"cart"===e&&R&&R(t),T.current=t,q(t),t&&t.mount(I.current)}},[S,w,s,R]);var M=E(s);return m().useEffect(function(){if(T.current){var e=A(s,M,["paymentRequest"]);e&&T.current.update(e)}},[s,M]),m().useLayoutEffect(function(){return function(){if(T.current&&"function"==typeof T.current.destroy)try{T.current.destroy(),T.current=null}catch(e){}}},[]),m().createElement("div",{id:o,className:a,ref:I})};return n.propTypes={id:j().string,className:j().string,onChange:j().func,onBlur:j().func,onFocus:j().func,onReady:j().func,onEscape:j().func,onClick:j().func,onLoadError:j().func,onLoaderStart:j().func,onNetworksChange:j().func,onCheckout:j().func,onLineItemClick:j().func,onConfirm:j().func,onCancel:j().func,onShippingAddressChange:j().func,onShippingRateChange:j().func,options:j().object},n.displayName=r,n.__elementType=e,n};m().createContext(null).displayName="EmbeddedCheckoutProviderContext",$("auBankAccount",!0),$("card",!0),$("cardNumber",!0),$("cardExpiry",!0),$("cardCvc",!0),$("fpxBank",!0),$("iban",!0),$("idealBank",!0),$("p24Bank",!0),$("epsBank",!0);var z=$("payment",!0);$("expressCheckout",!0),$("paymentRequestButton",!0),$("linkAuthentication",!0);var V=$("address",!0);function H({stripeId:e}){let t=B("calls useStripe()").stripe,r=Y(m().useContext(U),"calls useElements()").elements,[n,a]=(0,f.useState)(null),[i,s]=(0,f.useState)(!1);(0,f.useEffect)(()=>{if(!t)return;let e=new URLSearchParams(window.location.search).get("payment_intent_client_secret");e&&t.retrievePaymentIntent(e).then(({paymentIntent:e})=>{switch(e?.status){case"succeeded":a("Payment succeeded!");break;case"processing":a("Your payment is processing.");break;case"requires_payment_method":a("Your payment was not successful, please try again.");break;default:a("Something went wrong.")}})},[t]);let c=async n=>{if(n.preventDefault(),!t||!r)return;let o=r.getElement("address"),i=await o?.getValue();await fetch("/api/update-customer-billing-address",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:i,stripeId:e})}).then(e=>e.json()),s(!0);let{error:c}=await t.confirmPayment({elements:r,confirmParams:{return_url:"http://localhost:3001/order/orderComplete"}});"card_error"===c.type||"validation_error"===c.type?a(c.message):a("An unexpected error occurred."),s(!1)};return(0,o.jsxs)("form",{id:"payment-form",onSubmit:c,children:[o.jsx(V,{id:"address-element",options:{mode:"shipping"}}),o.jsx(z,{id:"payment-element",options:{layout:"tabs"}}),o.jsx("button",{disabled:i||!t||!r,id:"submit",children:o.jsx("span",{id:"button-text",children:i?o.jsx("div",{className:"spinner",id:"spinner"}):"Pay now"})}),n&&o.jsx("div",{id:"payment-message",children:n})]})}$("shippingAddress",!0),$("cart",!0),$("paymentMethodMessaging",!0),$("affirmMessage",!0),$("afterpayClearpayMessage",!0);var K=r(20975),Q=r(10928),ee=r.n(Q);let et=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];v=!0;var n=Date.now();return x().then(function(e){return g(e,t,n)})}("pk_test_51ObRbiBl2y7GPat6uFsMQ6hh7y6d3BmkzvIQCw2XklzJGS58LlkOOSxYTZVSeYAM1ut87Z1yIES8STDnvGkR3eoX00Np6K1qlA");function er({user:e}){let[t,r]=(0,f.useState)(""),{cart:n,stripeId:a=""}=e,i=n.map(e=>({id:e.id,amount:e.product.price,title:e.product.title,quantity:e.quantity,product:{price:e.product.price}}));return(0,f.useEffect)(()=>{fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:i,stripeId:e?.stripeId,elements:Z})}).then(e=>e.json()).then(e=>r(e.clientSecret))},[]),(0,o.jsxs)("div",{className:ee().paymentWrapper,children:[t&&o.jsx(Z,{options:{clientSecret:t,appearance:{theme:"stripe"}},stripe:et,children:o.jsx(H,{stripeId:a})}),!t&&o.jsx(K.Z,{})]})}function en(){let e=(0,s.a)();return o.jsx(a.MenuStateProvider,{children:(0,o.jsxs)("main",{children:[o.jsx(i.Z,{text:"Checkout",subText:"Look over your order and make sure everything looks correct before making your purchase. Then enter you credit card information down below."}),e&&e?.cart.length>0&&(0,o.jsxs)(o.Fragment,{children:[o.jsx(d,{cart:e.cart}),o.jsx(er,{user:e})]}),e&&0===e.cart.length&&o.jsx("p",{children:"You have no items in your cart..."})]})})}},20975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(95344),o=r(24227),a=r.n(o);function i(){return n.jsx("div",{className:a().loadingWrapper,children:n.jsx("img",{src:"/loading-icon.png",alt:"Loading something good...",className:a().image})})}},96359:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(95344),o=r(14416),a=r.n(o),i=r(53092),s=r.n(i);function c({text:e,subText:t}){return(0,n.jsxs)(n.Fragment,{children:[n.jsx("h1",{className:`${a().className} ${s().h1}`,children:e}),n.jsx("p",{className:s().p,children:t})]})}},6952:e=>{e.exports={cartListWrapper:"cartList_cartListWrapper__4dine",cartItemWrapper:"cartList_cartItemWrapper__I8xNw",totalsWrapper:"cartList_totalsWrapper__8x2J7"}},24227:e=>{e.exports={loadingWrapper:"loadingSpinner_loadingWrapper__5wKXB",image:"loadingSpinner_image__EpZBJ",infiniteSpin:"loadingSpinner_infiniteSpin__vK_mp"}},10928:e=>{e.exports={paymentWrapper:"payment_paymentWrapper__5l9I6"}},53092:e=>{e.exports={h1:"sectionHeader_h1___lmyj",p:"sectionHeader_p__y_jXV"}},4123:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>o,default:()=>i});let n=(0,r(86843).createProxy)(String.raw`/Users/pierce/projects/lkdw/frontend/src/app/checkout/page.tsx`),{__esModule:o,$$typeof:a}=n,i=n.default},89354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(70337);let o=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,623,337,34],()=>r(27264));module.exports=n})();