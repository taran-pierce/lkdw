(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2431:function(){},2166:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getCurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authenticatedItem"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stripeId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cart"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"orders"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"charge"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemsCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortDescription"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"ordersCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cartCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:608}};n.loc.source={body:"query getCurrentUser {\n  authenticatedItem {\n    ... on User {\n      email\n      id\n      name\n      stripeId\n      cart {\n        quantity\n        id\n        product {\n          id\n          price\n          shortDescription\n          title\n        }\n        user {\n          id\n        }\n      }\n      orders {\n        charge\n        id\n        itemsCount\n        total\n        date\n        items {\n          id\n          quantity\n          product {\n            id\n            price\n            title\n            shortDescription\n          }\n        }\n      }\n      ordersCount\n      cartCount\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.getCurrentUser=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var r=i[n]||new Set,c=new Set,s=new Set;for(r.forEach(function(e){s.add(e)});s.size>0;){var d=s;s=new Set,d.forEach(function(e){c.has(e)||(c.add(e),(i[e]||new Set).forEach(function(e){s.add(e)}))})}return c.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"getCurrentUser")},3271:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deleteCartItem"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"where"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CartItemWhereUniqueInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteCartItem"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"Variable",name:{kind:"Name",value:"where"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:108}};n.loc.source={body:"mutation deleteCartItem($where: CartItemWhereUniqueInput!) {\n  deleteCartItem(where: $where) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.deleteCartItem=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var r=i[n]||new Set,c=new Set,s=new Set;for(r.forEach(function(e){s.add(e)});s.size>0;){var d=s;s=new Set,d.forEach(function(e){c.has(e)||(c.add(e),(i[e]||new Set).forEach(function(e){s.add(e)}))})}return c.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"deleteCartItem")},6150:function(e,n,i){Promise.resolve().then(i.bind(i,9398))},9398:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return B}});var t=i(3827),a=i(4090),r=i(6042),c=i(8372),s=i.n(c),d=i(8792),o=i(8622),l=i(15),u=i(6917),m=i(6266),v=i.n(m),f=i(2166),h=i.n(f);function k(){let{data:e,loading:n,error:i}=(0,o.a)(h()),a=(0,u.a)(),{isMenuOpen:r,toggleMenu:c,closeMenu:s,openCart:m}=(0,l.useMenu)(),f=a&&a.cart&&a.cart.reduce((e,n)=>n.quantity+e,0);return(0,t.jsxs)("nav",{className:v().navigation,children:[(0,t.jsxs)("button",{className:"".concat(v().menuToggle," ").concat(r?v().open:""),type:"submit",onClick:function(){c()},children:["Menu",(0,t.jsx)("img",{className:"".concat(r?v().open:""),src:"/cart-icon.png",alt:"Cart Image"}),(null==a?void 0:a.cart)&&a.cart.length>0&&(0,t.jsx)("span",{className:v().cartCount,children:f})]}),(0,t.jsxs)("ul",{className:r?v().active:"",children:[(0,t.jsx)("li",{children:(0,t.jsx)(d.default,{href:"/products",onClick:()=>s(),children:"Products"})}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{children:(0,t.jsx)(d.default,{href:"/sell",onClick:()=>s(),children:"Sell"})}),(0,t.jsx)("li",{children:(0,t.jsx)(d.default,{href:"/account",onClick:()=>s(),children:"Account"})})]}),(0,t.jsxs)("li",{children:[!a&&(0,t.jsx)(d.default,{href:"/signin",onClick:()=>s(),children:"Sign In"}),a&&(0,t.jsxs)("button",{type:"button",className:v().cartButton,onClick:function(){m()},children:[(0,t.jsx)("img",{src:"/cart-icon.png",alt:"Cart Image"}),a.cart&&a.cart.length>0&&(0,t.jsx)("span",{className:v().cartCount,children:f})]})]})]})]})}var p=i(286),g=i(1044),_=i.n(g),N=i(300),S=i(6120),x=i(8507),C=i.n(x),j=i(3271),F=i.n(j);function b(){let{isCartOpen:e,closeCart:n}=(0,l.useMenu)(),[i,{data:a,loading:r,error:c}]=(0,p.D)(F(),{refetchQueries:[{query:h()}]}),{cart:s=[]}=(0,u.a)()||{},{formatted:o}=(0,S.w)(s);return(0,t.jsxs)("div",{className:"".concat(C().cartWrapper," ").concat(e?C().open:""),children:[(0,t.jsxs)("div",{className:C().headerWrapper,children:[(0,t.jsx)("p",{className:"".concat(_().className," ").concat(C().cartHeading),children:"Shopping Cart"}),(0,t.jsx)("button",{type:"button",onClick:n,className:C().cartClose,children:"Close"})]}),(0,t.jsx)("ul",{className:C().cartItems,children:s.length>=1&&s.map(e=>{var n,a;return(0,t.jsxs)("li",{className:C().cartItem,children:[(0,t.jsx)("button",{type:"button",onClick:n=>{i({variables:{where:{id:e.id}}})},className:C().removeButton,disabled:r,children:(0,t.jsx)("img",{src:"/trash-can.png",alt:"Remove"})}),(0,t.jsxs)("span",{className:C().itemTitle,children:[null===(n=e.product)||void 0===n?void 0:n.title," x ",e.quantity]}),(0,t.jsx)("span",{className:C().itemPrice,children:(0,N.Z)(null===(a=e.product)||void 0===a?void 0:a.price)})]},e.id)})}),(0,t.jsxs)("div",{className:C().cartTotals,children:[(0,t.jsx)("span",{className:C().label,children:"Total"}),(0,t.jsx)("span",{className:C().total,children:o})]}),(0,t.jsx)(d.default,{href:"/checkout/",onClick:n,className:"button ".concat(C().checkoutButton," ").concat(0===s.length?C().disabled:""),children:"Checkout"})]})}var y=i(7760),w=i.n(y);function I(){let{closeMenu:e}=(0,l.useMenu)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("header",{className:w().header,children:(0,t.jsxs)("div",{className:w().container,children:[(0,t.jsx)("h1",{className:"".concat(w().logo," ").concat(_().className),children:(0,t.jsx)(d.default,{href:"/",onClick:()=>e(),children:"LKDW"})}),(0,t.jsx)(k,{})]})}),(0,t.jsx)(b,{})]})}var D=i(8593),E=i(6464),T=i(5151),q=i(309);let W=(0,i(8388).Z)({uri:"http://localhost:3000/api/graphql",credentials:"include",fetchOptions:{mode:"cors"}}),M=new T.f({cache:new q.h,link:W,ssrMode:!0});function B(e){let{children:n}=e;return(0,t.jsx)("html",{lang:"en-US",children:(0,t.jsxs)("body",{className:"".concat(s().className),children:[(0,t.jsx)(a.Suspense,{children:(0,t.jsx)(r.Cd,{height:"6px",color:"#fff",shallowRouting:!0})}),(0,t.jsx)(E.e,{client:M,children:(0,t.jsxs)(l.MenuStateProvider,{children:[(0,t.jsx)(I,{}),(0,t.jsx)(D.Z,{children:n})]})})]})})}i(3385)},8593:function(e,n,i){"use strict";i.d(n,{Z:function(){return c}});var t=i(3827),a=i(2337),r=i.n(a);function c(e){let{children:n}=e;return(0,t.jsx)("div",{className:r().container,children:n})}},6917:function(e,n,i){"use strict";i.d(n,{a:function(){return c}});var t=i(8622),a=i(2166),r=i.n(a);function c(){let{data:e,loading:n,error:i}=(0,t.a)(r());return null==e?void 0:e.authenticatedItem}},6120:function(e,n,i){"use strict";i.d(n,{w:function(){return a}});var t=i(300);function a(e){let n=e.reduce((e,n)=>n.product?e+n.quantity*n.product.price:e,0);return{price:n,formatted:(0,t.Z)(n)}}},300:function(e,n,i){"use strict";function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n={style:"currency",currency:"USD",minimumFractionDigits:2};return e%100==0&&(n.minimumFractionDigits=0),Intl.NumberFormat("en-US",n).format(e/100)}i.d(n,{Z:function(){return t}})},15:function(e,n,i){"use strict";i.r(n),i.d(n,{MenuStateProvider:function(){return s},useMenu:function(){return d}});var t=i(3827),a=i(4090);let r=(0,a.createContext)({}),c=r.Provider;function s(e){let{children:n}=e,[i,r]=(0,a.useState)(!1),[s,d]=(0,a.useState)(!1);return(0,t.jsx)(c,{value:{isMenuOpen:i,setIsMenuOpen:r,closeMenu:function(){r(!1)},openMenu:function(){r(!0)},toggleMenu:function(){r(!i)},isCartOpen:s,setIsCartOpen:d,toggleCart:function(){d(!i)},closeCart:function(){d(!1)},openCart:function(){d(!0)}},children:n})}function d(){return(0,a.useContext)(r)}},3385:function(){},8507:function(e){e.exports={cartWrapper:"cart_cartWrapper__o6_A_",open:"cart_open__VG0md",checkoutButton:"cart_checkoutButton__ZdiLu",disabled:"cart_disabled__TopI_",headerWrapper:"cart_headerWrapper__2FEH2",cartHeading:"cart_cartHeading__gMpdT",cartClose:"cart_cartClose__cK_iO",cartItems:"cart_cartItems__VoWNj",cartItem:"cart_cartItem___W4_0",itemTitle:"cart_itemTitle__la4TH",itemPrice:"cart_itemPrice__S4Ham",removeButton:"cart_removeButton__Xz11s",cartTotals:"cart_cartTotals__Wn79u",label:"cart_label__9iL3d",total:"cart_total__kzLXV"}},2337:function(e){e.exports={container:"container_container__4LSPc"}},7760:function(e){e.exports={header:"header_header__BLF_O",container:"header_container__C9vlk",logo:"header_logo__cCNbh"}},6266:function(e){e.exports={navigation:"navigation_navigation__AAJkX",active:"navigation_active__u_K_S",cartButton:"navigation_cartButton__ttHwg",cartCount:"navigation_cartCount__wFBWy",menuToggle:"navigation_menuToggle__lKg28",open:"navigation_open__8RZCX"}}},function(e){e.O(0,[28,916,802,136,971,69,744],function(){return e(e.s=6150)}),_N_E=e.O()}]);