(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{5478:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkout"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:58}};n.loc.source={body:"mutation ($id: String) {\n  checkout(id: $id) {\n   id\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n},2166:function(e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getCurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"authenticatedItem"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stripeId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cart"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortDescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"orders"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"charge"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemsCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortDescription"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"ordersCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cartCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:608}};n.loc.source={body:"query getCurrentUser {\n  authenticatedItem {\n    ... on User {\n      email\n      id\n      name\n      stripeId\n      cart {\n        quantity\n        id\n        product {\n          id\n          price\n          shortDescription\n          title\n        }\n        user {\n          id\n        }\n      }\n      orders {\n        charge\n        id\n        itemsCount\n        total\n        date\n        items {\n          id\n          quantity\n          product {\n            id\n            price\n            title\n            shortDescription\n          }\n        }\n      }\n      ordersCount\n      cartCount\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;(function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})})(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.getCurrentUser=function(e,n){var r={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=i[n]||new Set,d=new Set,o=new Set;for(a.forEach(function(e){o.add(e)});o.size>0;){var s=o;o=new Set,s.forEach(function(e){d.has(e)||(d.add(e),(i[e]||new Set).forEach(function(e){o.add(e)}))})}return d.forEach(function(n){var i=t(e,n);i&&r.definitions.push(i)}),r}(n,"getCurrentUser")},8132:function(e,n,i){Promise.resolve().then(i.bind(i,6204))},7907:function(e,n,i){"use strict";i.r(n);var t=i(5313),r={};for(var a in t)"default"!==a&&(r[a]=(function(e){return t[e]}).bind(0,a));i.d(n,r)},6204:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return N}});var t=i(3827),r=i(4090),a=i(7907),d=i(286),o=i(15),s=i(6917),u=i(1911),c=i(300),l=i(7254),m=i.n(l);function v(e){let{data:n}=e;if(!n)return(0,t.jsx)("p",{children:"Error, no data found..."});let{id:i,charge:r,total:a,items:d,date:o}=n;return(0,t.jsxs)("div",{className:m().orderWrapper,children:[(0,t.jsxs)("h4",{className:m().date,children:["Order Date: ",function(e){let n=new Date(e);return"".concat(n.getMonth(),"/").concat(n.getDay(),"/").concat(n.getFullYear())}(o)]}),(0,t.jsxs)("h4",{children:["ID: ",i]}),d.map(e=>(0,t.jsxs)("div",{className:m().itemWrapper,children:[(0,t.jsxs)("h4",{children:[e.product.title," ",(0,t.jsxs)("small",{children:["x ",e.quantity]})]}),(0,t.jsx)("h4",{className:m().total,children:(0,c.Z)(e.product.price)})]},e.id)),(0,t.jsxs)("div",{className:m().totalWrapper,children:[(0,t.jsx)("h4",{children:"Total"}),(0,t.jsx)("h4",{className:m().total,children:(0,c.Z)(a)})]}),(0,t.jsxs)("div",{className:m().totalWrapper,children:[(0,t.jsx)("h4",{children:"Amount charged"}),(0,t.jsx)("h4",{className:m().total,children:(0,c.Z)(r)})]})]})}var f=i(3155),k=i(2166),p=i.n(k),g=i(5478),h=i.n(g);function N(e){var n;let{params:i}=e,c=(0,s.a)(),l=(0,a.useRouter)(),[m,{data:k,error:g,loading:N}]=(0,d.D)(h()),{id:S}=i;async function F(){var e,n;let{cart:i}=c;if(0===i.length)return;let t=await m({variables:{id:c.id},refetchQueries:[{query:p()}]});l.push("/order/".concat(null==t?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.checkout)||void 0===e?void 0:e.id))}if((0,r.useEffect)(()=>{c&&F()},[c]),!S)return(0,t.jsx)("p",{children:"ID not provided..."});if(!c||N)return(0,t.jsx)(f.Z,{});let _=c.orders.filter(e=>e.id===S);return(0,t.jsx)(o.MenuStateProvider,{children:(0,t.jsxs)("main",{children:[(0,t.jsx)(u.Z,{text:"Order",subText:"".concat(null==c?void 0:c.name,", thank you for your order! It will be shipped as soon as possible! ").concat(null===(n=_[0])||void 0===n?void 0:n.id)}),(0,t.jsx)(v,{data:_[0]})]})})}},3155:function(e,n,i){"use strict";i.d(n,{Z:function(){return d}});var t=i(3827),r=i(6775),a=i.n(r);function d(){return(0,t.jsx)("div",{className:a().loadingWrapper,children:(0,t.jsx)("img",{src:"/loading-icon.png",alt:"Loading something good...",className:a().image})})}},1911:function(e,n,i){"use strict";i.d(n,{Z:function(){return s}});var t=i(3827),r=i(1044),a=i.n(r),d=i(5710),o=i.n(d);function s(e){let{text:n,subText:i}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"".concat(a().className," ").concat(o().h1),children:n}),(0,t.jsx)("p",{className:o().p,children:i})]})}},6917:function(e,n,i){"use strict";i.d(n,{a:function(){return d}});var t=i(8622),r=i(2166),a=i.n(r);function d(){let{data:e,loading:n,error:i}=(0,t.a)(a());return null==e?void 0:e.authenticatedItem}},300:function(e,n,i){"use strict";function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n={style:"currency",currency:"USD",minimumFractionDigits:2};return e%100==0&&(n.minimumFractionDigits=0),Intl.NumberFormat("en-US",n).format(e/100)}i.d(n,{Z:function(){return t}})},15:function(e,n,i){"use strict";i.r(n),i.d(n,{MenuStateProvider:function(){return o},useMenu:function(){return s}});var t=i(3827),r=i(4090);let a=(0,r.createContext)({}),d=a.Provider;function o(e){let{children:n}=e,[i,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1);return(0,t.jsx)(d,{value:{isMenuOpen:i,setIsMenuOpen:a,closeMenu:function(){a(!1)},openMenu:function(){a(!0)},toggleMenu:function(){a(!i)},isCartOpen:o,setIsCartOpen:s,toggleCart:function(){s(!i)},closeCart:function(){s(!1)},openCart:function(){s(!0)}},children:n})}function s(){return(0,r.useContext)(a)}},6775:function(e){e.exports={loadingWrapper:"loadingSpinner_loadingWrapper__5wKXB",image:"loadingSpinner_image__EpZBJ",infiniteSpin:"loadingSpinner_infiniteSpin__vK_mp"}},7254:function(e){e.exports={orderWrapper:"order_orderWrapper__9Va_9",date:"order_date__kMQp0",itemWrapper:"order_itemWrapper__Jz8gM",total:"order_total__mgxTO",totalWrapper:"order_totalWrapper__9ZbLD"}},5710:function(e){e.exports={h1:"sectionHeader_h1___lmyj",p:"sectionHeader_p__y_jXV"}},286:function(e,n,i){"use strict";i.d(n,{D:function(){return c}});var t=i(9703),r=i(6050),a=i(569),d=i(9058),o=i(1039),s=i(866),u=i(9259);function c(e,n){var i=(0,u.x)(null==n?void 0:n.client);(0,o.Vp)(e,o.n_.Mutation);var c=r.useState({called:!1,loading:!1,client:i}),l=c[0],m=c[1],v=r.useRef({result:l,mutationId:0,isMounted:!0,client:i,mutation:e,options:n});Object.assign(v.current,{client:i,options:n,mutation:e});var f=r.useCallback(function(e){void 0===e&&(e={});var n=v.current,i=n.options,r=n.mutation,o=(0,t.pi)((0,t.pi)({},i),{mutation:r}),u=e.client||v.current.client;v.current.result.loading||o.ignoreResults||!v.current.isMounted||m(v.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:u});var c=++v.current.mutationId,l=(0,a.J)(o,e);return u.mutate(l).then(function(n){var i,t,r=n.data,a=n.errors,o=a&&a.length>0?new s.cA({graphQLErrors:a}):void 0,f=e.onError||(null===(i=v.current.options)||void 0===i?void 0:i.onError);if(o&&f&&f(o,l),c===v.current.mutationId&&!l.ignoreResults){var k={called:!0,loading:!1,data:r,error:o,client:u};v.current.isMounted&&!(0,d.D)(v.current.result,k)&&m(v.current.result=k)}var p=e.onCompleted||(null===(t=v.current.options)||void 0===t?void 0:t.onCompleted);return o||null==p||p(n.data,l),n}).catch(function(n){if(c===v.current.mutationId&&v.current.isMounted){var i,t={loading:!1,error:n,data:void 0,called:!0,client:u};(0,d.D)(v.current.result,t)||m(v.current.result=t)}var r=e.onError||(null===(i=v.current.options)||void 0===i?void 0:i.onError);if(r)return r(n,l),{data:void 0,errors:n};throw n})},[]),k=r.useCallback(function(){if(v.current.isMounted){var e={called:!1,loading:!1,client:i};Object.assign(v.current,{mutationId:0,result:e}),m(e)}},[]);return r.useEffect(function(){return v.current.isMounted=!0,function(){v.current.isMounted=!1}},[]),[f,(0,t.pi)({reset:k},l)]}}},function(e){e.O(0,[28,916,971,69,744],function(){return e(e.s=8132)}),_N_E=e.O()}]);